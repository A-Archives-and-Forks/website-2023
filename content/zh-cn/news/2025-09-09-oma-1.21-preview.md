---
categories:
  - advisories
title: "小熊猫包管理 (oma) v1.21 测试公告"
date: 2025-09-09T00:50:00+08:00
important: true
home: true
---

![oma-1.21](/assets/news/oma-1.21.webp)
> 咕咕嘎嘎！

小熊猫包管理考得中文十级！

本版更新，我们为 oma 实现了帮助信息及用户手册 (man pages) 中文翻译，方便各位了解 oma 的各项功能和参数。此外，我们还引入了使用中 Linux 内核的卸载保护、终端进度显示和自定义命令等一系列新功能：1.21 版更新内容相当丰富。

让我们来一起详细了解本版 oma 的新特性和修复吧～

测试指南
---

安同 OS 可通过如下命令获取 oma 1.21 测试版更新：

```bash 
oma topics --opt-in oma-preview
``` 

Debian、Ubuntu 及衍生版，Linux Mint、deepin 及 openKylin 用户可通过如下命令获取 oma（目前暂未区分测试源及稳定源，可直接获取 1.21 版更新）：

```bash 
curl -sSf https://repo.aosc.io/get-oma.sh | sudo sh
``` 

如果您在测试 oma 的过程中遇到问题或有任何建议，欢迎您来我社[各聊天群组](https://aosc.io/contact)与我们联系反馈。

让我也说中文：帮助信息本地化
---

oma 一向重视界面本地化及文本清晰程度，但由于一些技术上的困难，我们一直没能（基于 [clap](https://github.com/clap-rs/clap)）实现命令行帮助信息的本地化，以及基于此生成的用户手册 (man pages) 的本地化。1.21 周期，经过一系列的技术性试验和上游贡献，我们实现了大多数帮助信息的本地化：

![oma-help-chinese](/assets/news/oma-1.21-help-chinese.webp)

同样地，用户手册也完成了翻译：

![oma-1.21-man-zh-tw](/assets/news/oma-1.21-man-zh-tw.webp)

但是，相信朋友们也不难发现有一部分帮助信息依然是英文，这部分的翻译依然需要通过修缮 [clap](https://github.com/clap-rs/clap) 命令行解析器对某些帮助信息的处理才能得以实现。我们将在未来一个到数个版本的开发周期内推动这些问题的解决，让帮助信息得到完整的本地化，敬请期待。

请停车！使用中内核保护功能
---

相信不少用户朋友都有意无意地删除过正在使用中的 Linux 内核…… 什么，您不知道这是怎么个效果？那么，您是否遇到过系统突然无法挂载 U 盘、无法应用防火墙配置之类的问题？

Linux 内核在被删除后，实际上不会立即导致系统崩溃，这是因为 Linux 内核镜像已载入到内存中。但是由于 Linux 模块化的特征，许多内核特性（如文件系统、网络功能）等均使用模块的形式提供，而它们都是按需从磁盘载入的。那么，此时如果正在使用中的内核被卸载了，这些模块便无从载入了——于是我们就遇到了上述的奇怪问题。

为了解决这一问题，oma 1.21 引入了使用中内核的保护功能：

![oma-1.21-kernel-protection](/assets/news/oma-1.21-kernel-protection.webp)

oma 用超级小熊猫力守护系统稳定性！

其他新特性
---

- 新增 OSC 9;4 终端序列，在下载及安装软件包的过程中，为 Windows Terminal、Wezterm 等终端模拟器新增操作进度指示（安同 OS 后续将为默认终端模拟器 Konsole 引入该功能）
- 新增自定义命令插件支持：在 `/usr/libexec` 或 `/usr/local/libexec` 下放置如 `oma-doit` 等脚本并添加可执行权限位即可使用 `oma doit` 命令执行自定义脚本
- 为 oma 软件包名补全（如进行 `oma install bash-<tab>` 操作时）支持补全多个架构，方便 multiarch 用户选中所需软件包的架构
- 为阅读器界面新增 y（向上）/ Enter（向下）换行键位支持
- 新增软件源可用性检查：如果软件源配置中不包含当前系统中开启的架构，oma 将打印警告

问题修复
---

- 修复 `oma why`（软件包逆向依赖可视化）显示错误：该界面应显示具体版本，而非版本范围
- 修复 `oma why` 错误列出无关软件包的问题